{"version":3,"sources":["../../src/controllers/inbox.js"],"names":["InboxController","getInbox","req","res","next","email","find","skip","params","page","parseInt","limit","sort","date","exec","err","data","Error","handleSuccessResponse","getByEmailId","re","test","emailid","where","sender_mail","_id","getUid","findOne","uid","controller"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;IAEaA,e,WAAAA,e;;;;;;;;;;;;;;4MAETC,Q,GAAW,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC3BF,gBAAIG,KAAJ,CAAUC,IAAV,GAAiBC,IAAjB,CAAsB,CAACL,IAAIM,MAAJ,CAAWC,IAAX,GAAkB,CAAnB,IAAwBC,SAASR,IAAIM,MAAJ,CAAWG,KAApB,CAA9C,EAA0EA,KAA1E,CAAgFD,SAASR,IAAIM,MAAJ,CAAWG,KAApB,CAAhF,EAA4GC,IAA5G,CAAiH;AAC7GC,sBAAM,CAAC;AADsG,aAAjH,EAEGC,IAFH,CAEQ,UAACC,GAAD,EAAMC,IAAN,EAAe;AACnB,oBAAID,GAAJ,EAAS;AACLX,yBAAK,IAAIa,KAAJ,CAAU,cAAV,CAAL;AACH,iBAFD,MAEO;AACH,0BAAKC,qBAAL,CAA2BhB,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,EAAEY,UAAF,EAA3C;AACH;AACJ,aARD;AASH,S,QAGDG,Y,GAAe,UAACjB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/B,gBAAIgB,KAAK,cAAT;AACA,gBAAIA,GAAGC,IAAH,CAAQnB,IAAIM,MAAJ,CAAWc,OAAnB,CAAJ,EAAiC;AAC7B,oBAAIC,QAAQ,EAAEC,aAAatB,IAAIM,MAAJ,CAAWc,OAA1B,EAAZ;AACH,aAFD,MAEO;AACHC,wBAAQ,EAAEE,KAAKvB,IAAIM,MAAJ,CAAWc,OAAlB,EAAR;AACH;AACDpB,gBAAIG,KAAJ,CAAUC,IAAV,CAAeiB,KAAf,EAAsBX,IAAtB,CAA2B;AACvBC,sBAAM,CAAC;AADgB,aAA3B,EAEGC,IAFH,CAEQ,UAACC,GAAD,EAAMC,IAAN,EAAe;AACnB,oBAAID,GAAJ,EAAS;AACLX,yBAAK,IAAIa,KAAJ,CAAUF,GAAV,CAAL;AACH,iBAFD,MAEO;AACH,0BAAKG,qBAAL,CAA2BhB,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,EAAEY,UAAF,EAA3C;AACH;AACJ,aARD;AASH,S,QAIDU,M,GAAS,UAACxB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACzBF,gBAAIG,KAAJ,CAAUsB,OAAV,CAAkB;AACdC,qBAAKlB,SAASR,IAAIM,MAAJ,CAAWoB,GAApB;AADS,aAAlB,EAEGd,IAFH,CAEQ,UAACC,GAAD,EAAMC,IAAN,EAAe;AACnB,oBAAID,GAAJ,EAAS;AACLX,yBAAK,IAAIa,KAAJ,CAAU,aAAV,CAAL;AACH,iBAFD,MAEO;AACH,0BAAKC,qBAAL,CAA2BhB,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,EAAEY,UAAF,EAA3C;AACH;AACJ,aARD;AASH,S;;AA5CD;;;AAaA;;;AAoBA;;;;;;AAcJ,IAAMa,aAAa,IAAI7B,eAAJ,EAAnB;kBACe6B,U","file":"inbox.js","sourcesContent":["import BaseAPIController from \"./BaseAPIController\";\n\nexport class InboxController extends BaseAPIController {\n    /* Get INBOX data*/\n    getInbox = (req, res, next) => {\n        req.email.find().skip((req.params.page - 1) * parseInt(req.params.limit)).limit(parseInt(req.params.limit)).sort({\n            date: -1\n        }).exec((err, data) => {\n            if (err) {\n                next(new Error(\"invalid page\"));\n            } else {\n                this.handleSuccessResponse(req, res, next, { data });\n            }\n        });\n    }\n\n    /* Get Emails By EmailId*/\n    getByEmailId = (req, res, next) => {\n        var re = /\\S+@\\S+\\.\\S+/;\n        if (re.test(req.params.emailid)) {\n            var where = { sender_mail: req.params.emailid }\n        } else {\n            where = { _id: req.params.emailid }\n        }\n        req.email.find(where).sort({\n            date: -1\n        }).exec((err, data) => {\n            if (err) {\n                next(new Error(err));\n            } else {\n                this.handleSuccessResponse(req, res, next, { data });\n            }\n        });\n    }\n\n\n    /* Get UID data*/\n    getUid = (req, res, next) => {\n        req.email.findOne({\n            uid: parseInt(req.params.uid)\n        }).exec((err, data) => {\n            if (err) {\n                next(new Error(\"invalid UID\"));\n            } else {\n                this.handleSuccessResponse(req, res, next, { data });\n            }\n        });\n    }\n}\n\nconst controller = new InboxController();\nexport default controller;"]}
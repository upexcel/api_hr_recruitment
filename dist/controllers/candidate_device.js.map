{"version":3,"sources":["../../src/controllers/candidate_device.js"],"names":["DeviceController","save","req","res","next","checkBody","body","getValidationResult","then","_db","Candidate_device","createDevice","data","handleSuccessResponse","error","message","err","Error","json","catch","logout","email_id","device_id","updateMobile","email","update","registration_id","mobile_no","exec","response","controller"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAEaA,gB,WAAAA,gB;;;;;;;;;;;;;;8MACTC,I,GAAO,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACvB,uCAAwBH,IAAxB,CAA6BC,IAAIG,SAAjC,EAA4CH,IAAII,IAAhD,EAAsDJ,IAAIK,mBAAJ,EAAtD,EACKC,IADL,CACU,UAACF,IAAD,EAAU;AACZ,sBAAKG,GAAL,CAASC,gBAAT,CAA0BC,YAA1B,CAAuCL,IAAvC,EACKE,IADL,CACU,UAACI,IAAD,EAAU;AACZ,0BAAKC,qBAAL,CAA2BX,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,EAAEU,OAAO,CAAT,EAAYC,SAAS,QAArB,EAA+BH,MAAMA,IAArC,EAA3C;AACH,iBAHL,EAGO,UAACI,GAAD,EAAS;AACR,0BAAM,IAAIC,KAAJ,CAAUd,IAAIe,IAAJ,CAAS;AACrBJ,+BAAO,CADc;AAErBC,iCAASC,GAFY;AAGrBJ,8BAAM;AAHe,qBAAT,CAAV,CAAN;AAKH,iBATL;AAUH,aAZL,EAYOO,KAZP,CAYa,UAACH,GAAD,EAAS;AAAE,sBAAKH,qBAAL,CAA2BX,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,EAAEU,OAAO,CAAT,EAAYC,SAASC,GAArB,EAA0BJ,MAAM,EAAhC,EAA3C;AAAkF,aAZ1G;AAaH,S,QAEDQ,M,GAAS,UAAClB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACzB,kBAAKK,GAAL,CAASC,gBAAT,CAA0BU,MAA1B,CAAiClB,IAAII,IAAJ,CAASe,QAA1C,EAAoDnB,IAAII,IAAJ,CAASgB,SAA7D,EACKd,IADL,CACU,UAACI,IAAD,EAAU;AACZ,sBAAKC,qBAAL,CAA2BX,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,EAAEU,OAAO,CAAT,EAAYC,SAAS,QAArB,EAA3C;AACH,aAHL,EAGO,UAACC,GAAD,EAAS;AACR,sBAAM,IAAIC,KAAJ,CAAUd,IAAIe,IAAJ,CAAS;AACrBJ,2BAAO,CADc;AAErBC,6BAASC;AAFY,iBAAT,CAAV,CAAN;AAIH,aARL;AASH,S,QAEDO,Y,GAAe,UAACrB,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/BF,gBAAIsB,KAAJ,CAAUC,MAAV,CAAiB,EAAE,eAAevB,IAAII,IAAJ,CAASe,QAA1B,EAAoC,mBAAmBnB,IAAII,IAAJ,CAASoB,eAAhE,EAAjB,EAAoG,EAAE,aAAaxB,IAAII,IAAJ,CAASqB,SAAxB,EAApG,EAAyIC,IAAzI,CAA8I,UAASZ,GAAT,EAAca,QAAd,EAAwB;AAClK,oBAAIb,GAAJ,EAAS;AACLb,wBAAIe,IAAJ,CAAS;AACLJ,+BAAO,CADF;AAELC,iCAASC,GAFJ;AAGLJ,8BAAM;AAHD,qBAAT;AAKH,iBAND,MAMO;AACHT,wBAAIe,IAAJ,CAAS,EAAEJ,OAAO,CAAT,EAAYC,SAAS,uBAArB,EAAT;AACH;AACJ,aAVD;AAWH,S;;;;;;AAGL,IAAMe,aAAa,IAAI9B,gBAAJ,EAAnB;kBACe8B,U","file":"candidate_device.js","sourcesContent":["import BaseAPIController from \"./BaseAPIController\";\nimport CandidateDeviceProvider from \"../providers/candidate_device\";\n\nexport class DeviceController extends BaseAPIController {\n    save = (req, res, next) => {\n        CandidateDeviceProvider.save(req.checkBody, req.body, req.getValidationResult())\n            .then((body) => {\n                this._db.Candidate_device.createDevice(body)\n                    .then((data) => {\n                        this.handleSuccessResponse(req, res, next, { error: 0, message: 'sucess', data: data })\n                    }, (err) => {\n                        throw new Error(res.json({\n                            error: 1,\n                            message: err,\n                            data: []\n                        }));\n                    })\n            }).catch((err) => { this.handleSuccessResponse(req, res, next, { error: 1, message: err, data: [] }) });\n    }\n\n    logout = (req, res, next) => {\n        this._db.Candidate_device.logout(req.body.email_id, req.body.device_id)\n            .then((data) => {\n                this.handleSuccessResponse(req, res, next, { error: 0, message: 'sucess' })\n            }, (err) => {\n                throw new Error(res.json({\n                    error: 1,\n                    message: err,\n                }));\n            })\n    }\n\n    updateMobile = (req, res, next) => {\n        req.email.update({ \"sender_mail\": req.body.email_id, \"registration_id\": req.body.registration_id }, { \"mobile_no\": req.body.mobile_no }).exec(function(err, response) {\n            if (err) {\n                res.json({\n                    error: 1,\n                    message: err,\n                    data: []\n                })\n            } else {\n                res.json({ error: 0, message: 'Mobile Number Updated' })\n            }\n        })\n    }\n}\n\nconst controller = new DeviceController();\nexport default controller;"]}
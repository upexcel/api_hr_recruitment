{"version":3,"sources":["../../src/service/imap.js"],"names":["imapConnection","imap","Promise","resolve","reject","openInbox","cb","openBox","once","err","box","console","log","connect","data","user","dataValues","email","password","host","port","tls"],"mappings":";;;;;;;;;AAAA;;;;;;;;IAEaA,c,WAAAA,c;;;;;;;uCACMC,I,EAAM;AACjB,mBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,yBAASC,SAAT,CAAmBC,EAAnB,EAAuB;AACnBL,yBAAKM,OAAL,CAAa,OAAb,EAAsB,IAAtB,EAA4BD,EAA5B;AACH;AACDL,qBAAKO,IAAL,CAAU,OAAV,EAAmB,YAAW;AAC1BH,8BAAU,UAASI,GAAT,EAAcC,GAAd,EAAmB;AACzB,4BAAID,GAAJ,EAAS;AACLL,mCAAOK,GAAP;AACH,yBAFD,MAEO;AACHN,oCAAQO,GAAR;AACH;AACJ,qBAND;AAOH,iBARD;AASAT,qBAAKO,IAAL,CAAU,OAAV,EAAmB,UAASC,GAAT,EAAc;AAC7BL,2BAAOK,GAAP;AACH,iBAFD;AAGAR,qBAAKO,IAAL,CAAU,KAAV,EAAiB,YAAW;AACxBG,4BAAQC,GAAR,CAAY,kBAAZ;AACH,iBAFD;AAGAX,qBAAKY,OAAL;AACH,aApBM,CAAP;AAsBH;;;uCACcC,I,EAAM;AACjB,mBAAO,IAAIZ,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,oBAAIH,OAAO,mBAAS;AAChBc,0BAAMD,KAAKE,UAAL,CAAgBC,KADN;AAEhBC,8BAAUJ,KAAKE,UAAL,CAAgBE,QAFV;AAGhBC,0BAAM,gBAHU;AAIhBC,0BAAM,GAJU;AAKhBC,yBAAK;AALW,iBAAT,CAAX;AAOAlB,wBAAQF,IAAR;AACH,aATM,CAAP;AAUH;;;;;;AAEL,IAAMA,OAAO,IAAID,cAAJ,EAAb;kBACeC,I","file":"imap.js","sourcesContent":["import Imap from \"imap\";\n\nexport class imapConnection {\n    imapConnection(imap) {\n        return new Promise((resolve, reject) => {\n            function openInbox(cb) {\n                imap.openBox(\"INBOX\", true, cb);\n            }\n            imap.once(\"ready\", function() {\n                openInbox(function(err, box) {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(box);\n                    }\n                });\n            });\n            imap.once(\"error\", function(err) {\n                reject(err);\n            });\n            imap.once(\"end\", function() {\n                console.log(\"Connection ended\");\n            });\n            imap.connect();\n        });\n\n    }\n    imapCredential(data) {\n        return new Promise((resolve, reject) => {\n            var imap = new Imap({\n                user: data.dataValues.email,\n                password: data.dataValues.password,\n                host: \"imap.gmail.com\",\n                port: 993,\n                tls: \"TLS\",\n            });\n            resolve(imap);\n        });\n    }\n}\nconst imap = new imapConnection();\nexport default imap;"]}